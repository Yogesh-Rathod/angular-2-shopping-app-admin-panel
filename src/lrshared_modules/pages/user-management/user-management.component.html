<div class="card">
    <div class="card-header clearfix">
        <span>User List</span>
        <button class="btn btn-info" routerLink="add" style="float: right; margin: -5px; background: #fff; color: #000;" translate>Add New User</button>
    </div>
    <div class="card-body" style="overflow: scroll;">
        <form novalidate (ngSubmit)="Search(filter.value)" [formGroup]="filter">
            <div class="row">
                <div class="form-group col-md-6">
                    <input type="text" class="form-control" formControlName="searchText" title="Search with Name, Username, Email or Program Name" placeholder="search here">
                </div>
                <div class="form-group">
                    <button class="btn btn-primary" type="submit" [disabled]="filter.get('searchText').value==''">Search</button>
                    <button class="btn btn-danger" type="button" (click)="reset()">Reset</button>
                </div>
            </div>
        </form>
        <div *ngIf="!isLoading.userList">
            <table class="table table-bordered" *ngIf="userListData && userListData.length>0" width="100%">
                <thead>
                    <tr class="black-muted-bg">
                        <th width="15%">{{'userMangement.name'|translate}}</th>
                        <th width="20%">Username</th>
                        <th width="20%">Program</th>
                        <th width="20%">{{'userMangement.email'|translate}}</th>
                        <th width="15%">{{'userMangement.mobile'|translate}}</th>
                        <th width="10%">{{'userMangement.status'|translate}}</th>
                        <th width="10%">{{'userMangement.action'|translate}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of userListData | paginate : {
                        itemsPerPage: itemsPerPage,
                        currentPage: p,
                        totalItems: userListData.length
                      };">
                        <td class="alignCenter">{{(user.subject ? user.subject.name : 'NA') || 'NA'}}</td>
                        <td class="alignCenter">
                            <span style="word-break:break-all">{{(user.subject ? user.subject.username : 'NA') || 'NA'}}</span>
                        </td>
                        <td class="alignCenter">{{(user.loyltyProgram ? user.loyltyProgram.programName : 'NA') || 'NA'}}</td>
                        <td class="alignCenter">{{(user.subject ? user.subject.email : 'NA') || 'NA'}}</td>
                        <td class="alignCenter">{{(user.subject ? user.subject.mobile : 'NA') || 'NA'}}</td>
                        <td class="alignCenter">{{(user.subject ? user.subject.status : 'NA') || 'NA'}}</td>
                        <td class="alignCenter">
                            <a href="javascript:void(0)" routerLink="edit/{{user.subject.id}}">
                                <i class="ion-edit" title="Edit user"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr *ngIf="userListData && userListData.length != 0 && (userListData.length > itemsPerPage)">
                        <td colspan="12" class="text-center" style="padding:15px; border-color: transparent;">
                            <pagination-controls (pageChange)="p = $event"></pagination-controls>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <loader-component *ngIf="isLoading.userList"></loader-component>
    </div>
</div>